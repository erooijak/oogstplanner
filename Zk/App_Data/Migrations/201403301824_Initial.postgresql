/* * * * * * * * * * * * * * * * * * * * * * *
 *
 * Migration:		Initial
 *
 * Date and time:	3/30/2015 6:24:02 PM
 *
 * * * * * * * * * * * * * * * * * * * * * * */

CREATE SCHEMA IF NOT EXISTS "public"
CREATE TABLE "public"."Calendars" (
    "CalendarId" serial NOT NULL,
    "UserId" integer NOT NULL,
    CONSTRAINT "PK_public.Calendars" PRIMARY KEY ("CalendarId")
)
CREATE INDEX "IX_public.Calendars_UserId" ON "public"."Calendars"("UserId")
CREATE TABLE "public"."FarmingActions" (
    "Id" serial NOT NULL,
    "Month" integer NOT NULL,
    "Action" integer NOT NULL,
    "CropCount" integer NOT NULL,
    "Calendar_CalendarId" integer,
    "Crop_Id" integer,
    CONSTRAINT "PK_public.FarmingActions" PRIMARY KEY ("Id")
)
CREATE INDEX "IX_public.FarmingActions_Calendar_CalendarId" ON "public"."FarmingActions"("Calendar_CalendarId")
CREATE INDEX "IX_public.FarmingActions_Crop_Id" ON "public"."FarmingActions"("Crop_Id")
CREATE TABLE "public"."Crops" (
    "Id" serial NOT NULL,
    "Name" text,
    "Race" text,
    "Category" text,
    "GrowingTime" integer NOT NULL,
    "AreaPerCrop" float8,
    "AreaPerBag" float8,
    "PricePerBag" decimal,
    "SowingMonths" integer NOT NULL,
    "HarvestingMonths" integer NOT NULL,
    CONSTRAINT "PK_public.Crops" PRIMARY KEY ("Id")
)
CREATE TABLE "public"."Users" (
    "UserId" serial NOT NULL,
    "Name" text,
    "FullName" text,
    "Email" text,
    "Enabled" boolean NOT NULL,
    CONSTRAINT "PK_public.Users" PRIMARY KEY ("UserId")
)
CREATE TABLE "public"."PasswordResetTokens" (
    "Id" serial NOT NULL,
    "Email" text,
    "Token" text,
    "TimeStamp" timestamp NOT NULL,
    CONSTRAINT "PK_public.PasswordResetTokens" PRIMARY KEY ("Id")
)
ALTER TABLE "public"."Calendars" ADD CONSTRAINT "FK_public.Calendars_public.Users_UserId" FOREIGN KEY ("UserId") REFERENCES "public"."Users" ("UserId") ON DELETE CASCADE
ALTER TABLE "public"."FarmingActions" ADD CONSTRAINT "FK_public.FarmingActions_public.Calendars_Calendar_CalendarId" FOREIGN KEY ("Calendar_CalendarId") REFERENCES "public"."Calendars" ("CalendarId")
ALTER TABLE "public"."FarmingActions" ADD CONSTRAINT "FK_public.FarmingActions_public.Crops_Crop_Id" FOREIGN KEY ("Crop_Id") REFERENCES "public"."Crops" ("Id")
CREATE TABLE "public"."__MigrationHistory" (
    "MigrationId" varchar(150) NOT NULL,
    "ContextKey" varchar(300) NOT NULL,
    "Model" bytea NOT NULL,
    "ProductVersion" varchar(32) NOT NULL,
    CONSTRAINT "PK_public.__MigrationHistory" PRIMARY KEY ("MigrationId", "ContextKey")
)
insert into "public"."__MigrationHistory" ("MigrationId", "ContextKey", "Model", "ProductVersion")
 values ('201503301623177_Initial', 'Zk.Migrations.Configuration',  decode('1F8B0800000000000003EC5C5B6FE336167E5F60FF83A0C7456A3BC9749006718B8C27E9BA6D2E88D362312F0346621C2112A9A5A834C1627F591FFA93F62FECA1A80B49DD28D9CEA44551A0A829F2E3E1B9F0903C5FFABFDF7E3FF9EE390A9D27CC928092B9BB3F99B90E261EF503B29EBB29BFFFEAC8FDEEDBBFFFEDE4CC8F9E9D5F8A7E87A21F8C24C9DC7DE03C3E9E4E13EF014728994481C76842EFF9C4A3D114F9747A309B7D33DDDF9F62807001CB714E6E52C28308673FE0E782120FC73C45E105F57198E4EDF06595A13A9728C2498C3C3C773F3D4E6427D7390D030402AC7078EF3A8810CA1107F18E7F4EF08A334AD6AB181A5078FB1263E8778FC204E7621F57DD6D57303B102B9856030B282F4D388D0602EE1FE62A999AC34729D62D55064A3B03E5F217B1EA4C71737781424C7CC45CC79CEC781132D151D1EBA4E8BDE77C7ADC2B6D3E9B64FFEC398B34E429C3738253CE50B8E75CA77761E0FD885F6EE92326739286A12A0E0804DFB40668BA6634C68CBFDCE07B43C8A5EF3A537DFCD4042887378C95CB59127E78E03A97200CBA0B71697D65E92B4E19FE1E13CC10C7FE35E21C3330DED2C799FE6A521873829759CC67605CA2A7609D4D6FA09D231641CC9D7AE21BF8F60D0EB36EC943104B179F685D3E57363D6734BAA1A10952F6F87C8BD81A73909476765BD194790344160A6814B444943D2AF9B40FE57C8558FAD74268559A9369E5DA9D0EAFADD0CEEBB521AFECFA635CFE355DFD8212FE504C9799386FE9737703A7B08702249B44C360B405FC5C50C824DB8AC12AA4B6197DA69BF704A9B5B0F0D346D0AC5BAB90F0B54F40D165A360942258651EE8F957E86973897F9701C319D8C5752ED0F34F98ACF90344267A06EB06CFD82F5A72097E26019CE2601067696F24DD206FF7932C60FD6BCA5E763ED1F78CFE0AC8B741A539CB9DC1DCAE1846D79849FF95401F29B89DEDC00F683D6CDC350B3C6C0CC45E10A1D075AE19FC577E4A3F729D9587C43A0EFA2057992EB2ED3AD9C20EFE4FC49E70C2C7435AEF1AF2EC60B36B889EAFBC6B1467BFA13B87DD99F10FB67B9C83FCAF32D159848270F7B310618CD2481F28244544B6E5D6D728497EA5CCBFC109E69913DA39797DDC5F89F20B38476EB15DCF02A96BC55154A51D5089CC6723BD308D141FCCF7E965721EA2755288D4E3853064138F0305F898852F22312B1EA1ABE102477798157B17E52B71E6FC058529FC9CD594A6F5FE019114B1A0ECBEDFDDFD1CDF31AD7F3D916AFD2F1062952CEFBA3B9FC64CB862DEF9A807192B42BFEF59644AAACE873D22FF908655E7F77D22A76B307F9A54A21CF4C8BDC231CF7E572AFCBA47FCAB474ED5015FEFF72CE1923EE953ECCF0E7A1602E72543AAD9BBA37A94C878E88811F55E5A064A1E729D91520D7CDD7091073DDB70A9CE716D11D3ACA5D324A15E90ADBAE9A9A5BA17EB739F11DFB1BB2457A749E30DE702D416C4A028D8DFE6EE3F6ACBEB9DA27C05ABA6A86EF13AFA6C32A9694359F9208588CB83A5A4DA657CFB8A502FF2AA12B2EBCD1615A03FFFB509D7F216D86F9CAE15373F212AA0F256A103EEEB3202E015F98843CCB123552770130FF9F5BC0D31E2EB2D7060C24C9C5850B8A02481080F08AF9FAE02E205310ABBC436060DB88708C1CA29CC2F1F710C7381845D76D86CEE720A43597DBA69F53179AA81311C46947BD8A747D1829F79C38E0CC2E59B7271BE315D4620C2F9C2F0594880D511AAE68835BFD341CC37FC1A9211C93D7022301BE5C902B667B0B04ED36019003D83EB978D26A8A6AB8C01ACD8B3454DCA4BAAD2B9FBCDD57438EBEC52AEB36EAB9A175BE7130554F12273A3D035315C4B99CD7B35544B36B6E9662B9A51138CAA15E9C71B6BC4282BD595D191782C528F8D1D2D928D0293C7A0F5C28BEB5BB9D15575F0A92C841705F3694BC5FCE402C5315844A9A0E72DCE4A96CF175FAD861798238931F592863A73296D39135CE4D11A1B5F616A90F43C600987DB2CBA43E224BDF0A35AB76A5B6FD9A48A79CC9DBB6EA962C32A4688FF2E728759ED6EC879F9B073584D241266F642D1E026F5A1197301858875D4A917344C23D257FBEE422B32B08AD4969585D318EBA9E5ED9AC26A871DDD0256F631B6937146D213E7704BF58C6F53B0A9DC61E6C99F595480BCC91EA3382AA820CDC7872E14A552AA795DD5FC66DC45268B91A1DC90FE6CC2B871D86E7C42BE93ABE3658B3D82ACD5A908B26580379485387D0B2A5AED91B44A9B0AA67D18E0ED6AC14D7379F5C360BCAC9CD60097B5DBA369D539154EFB608FA797E65440FD8B3D62BD3AA7A2D6BFBE99A89727A57151DF74D8B388FAE661DB49B5BB8BFEAAD6A6A254ADF64879BD4485C99B066014A5320DA5687C33DED5749D1DE76B0D57DEE19E6703B29BECB30D9BE7177D15A3F1EEDF8951D5B7349CAAF9F57D47BF95759C6195178BDEA3AAD277D09154DC32BB08A2B55788BABA46DD3F3E775D44B2D7CE0270B4C0AD2F8CA3FDBD532EB84BFA41F638BD4C44EDB42CE20C5CBE796DDFD4874A4E518FFF64FDB6EC3BCA3BCD48336410DBF711E545EA6DF947F372FB7DA2F6A263762977B5F265C778C139C95F53FAFF30A2F6BC22BB08E6187D0A7CF1B47219AF937F8755CB0522C13D1C0965E1D1FD667238796FFC59C5DBF913876992F861C3FB53D3DF39E866FA027F7E1010FE2E8FDB2E4ACB40F69D4E1F9373D44A1F4BE2E3E7B9FB9F6CCCB1B3FCD767396CCFB96260F36367E6FC775B6CA68E8DE8355845BBD1B2C67697536CC4731F055123B78F43694A6C03BDA701A3CD95AC68C0C55E3A540C39CE7EEA61FCF43F89EFCA5BA09C41964687594765828F196F92BCC76034F0B7C745619DBE7D1F52C48F860A54A7738FC369A0779334C2D0DA41EF1E364513DD7B94F2DA88DE1660C328DE23026F3BECEBB7198026997A0C8646851D05A053A0EF280D77C87FFE936CBD1B6B5DE3168F023069C3E26FAC13D930CA7A1BB3FDF4A792C1AC3BA7956CB009416E238A961535AAFB15C59A9AD557F56C9FB8E71D67EB04AD8D58906A821EC0487C4BCED15C78B4D9B776ED10ED0F35AFE004764C5049E7794D92E6C80D6A4BDED252B0DA29BBF38FC1E8AC33845AEA3BE67B4F1769533E83CDDD38A3D983A1651A6CE7EA75D23AFB599D2DF375D3EA1AC99FADDCCFB6253512ED9A98A1ADC4D016E466265B3F6DD49235DA326B230DF50B334C4D97D38960D664C976C6E5DBA48EAAEE589166DEC672B7C60B5523A3E208D85040ADBC613BCCCF7A3D00B661E57FA704292009D61584A87010EC691B70D96749EE6991070C898A2EE6E328E6C887DDF994F1E01E791C3E7B3849D43F243A8BEEB0BF2457298F530E4BC6D15DA8D18A443EE99A3FA3B7EA329F5CC5D9BEB98D258098012C015F910F6910FAA5DCE70D17A3160891A8F2ABA3B0251757C8F54B897449892550AEBE32BFDEE2280E012CB9222BF484C7C8064EFB135E23EFA5A8F2B483F41B4257FBC9C700AD198A921CA31A0F3FC187FDE8F9DBFF0B3000631B65EA554C0000', 'hex') , '6.1.1-30610')

