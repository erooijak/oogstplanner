/* * * * * * * * * * * * * * * * * * * * * * *
 *
 * Migration:		CalendarAndUser
 *
 * Date and time:	11/27/2014 11:20:12 PM
 *
 * * * * * * * * * * * * * * * * * * * * * * */

CREATE SCHEMA IF NOT EXISTS "public"
CREATE TABLE "public"."Calendars" (
    "CalendarId" serial NOT NULL,
    "UserId" integer NOT NULL,
    CONSTRAINT "PK_public.Calendars" PRIMARY KEY ("CalendarId")
)
CREATE INDEX "IX_public.Calendars_UserId" ON "public"."Calendars"("UserId")
CREATE TABLE "public"."FarmingMonths" (
    "Id" serial NOT NULL,
    "Month" integer NOT NULL,
    "SowingPatternAsJson" text,
    "HarvestingPatternAsJson" text,
    "Calendar_CalendarId" integer,
    CONSTRAINT "PK_public.FarmingMonths" PRIMARY KEY ("Id")
)
CREATE INDEX "IX_public.FarmingMonths_Calendar_CalendarId" ON "public"."FarmingMonths"("Calendar_CalendarId")
CREATE TABLE "public"."Users" (
    "UserId" serial NOT NULL,
    "Name" text,
    CONSTRAINT "PK_public.Users" PRIMARY KEY ("UserId")
)
ALTER TABLE "public"."Calendars" ADD CONSTRAINT "FK_public.Calendars_public.Users_UserId" FOREIGN KEY ("UserId") REFERENCES "public"."Users" ("UserId") ON DELETE CASCADE
ALTER TABLE "public"."FarmingMonths" ADD CONSTRAINT "FK_public.FarmingMonths_public.Calendars_Calendar_CalendarId" FOREIGN KEY ("Calendar_CalendarId") REFERENCES "public"."Calendars" ("CalendarId")
insert into "public"."__MigrationHistory" ("MigrationId", "ContextKey", "Model", "ProductVersion")
 values ('201411272218183_CalendarAndUser', 'Zk.Migrations.Configuration',  decode('1F8B0800000000000003EC5B5F6FDB36107F1FB0EF20E8B1486D27698B34B05BA44EB3B9AB93204E8BA12F0123D18E108AD2282AB331EC93ED611F695F612751FF48EA7FEC2C1B8602454DDDFDEE78BC3B9277EC5F7FFC397EBF7689F18059E0787462EE0F46A681A9E5D90E5D4DCC902F5F1E99EFDF7DFFDDF8A3EDAE8DAF29DD6144079C349898779CFBC7C36160DD61170503D7B19817784B3EB03C77886C6F78301ABD1DEEEF0F314098806518E3AB9072C7C5F10FF839F5A8857D1E2232F76C4C82641CBE2C6254E31CB938F0918527E6B7FB8120328D13E220506081C9D23410A51E471CD43BFE12E005671E5D2D7C1840E47AE363A05B2212E044EDE39CBCED0C4607D10C8639630A658501F7DC8E80FB878949862A7B2FC39A99C9C0681FC1B87C13CD3A36DCC49C2282A98D9869A8C28EA784458405BB0E52EA3DE3DBFD5EB6E6A341FC67CF988684870C4F280E394364CFB80C6F8963FD8437D7DE3DA6131A1252540714826FD2000C5D32CFC78C6FAEF0525172669BC650E61FAA00197B09AF98CE8CF2C303D3380765D02DC1D9EA17A6BEE01EC33F608A19E2D8BE449C63068B37B3716C3F4D0B452678590B790AC6397A7056B17805ED0C3117626EEE517E07AE7D85494C15DC39BEF0F06C596E14D233E6B9571E295841A6B8597821B340956BAF96EC1AB115E6ED358EE65FAFA8A028D12FFA50AD56FCB54C9BF130F7EC5A7F2F4EAC9DCF17399ED8EFFBF8FB53FA796245212E5EE064A4C9D7159C85F72B5838117F127C0AA25497A072069F4C638ED69F315DF13B908AD6E03ACE1ADBE94822E40B75607B0226CEC246993F22F68003BE63B9ADFD520444AD3F46244FEC806922EBEA84ED12E0F61C31FAFB9F5AB929A8D272F704CAFF33C8AE174E177285ACDD0B99C2FC571EDBEC5CD009C3E81233E17642D6A907DED296F1035A75E3BB648E8515466C392E22A671C9E05FC905E1C83416168ADCE4A05DC24F8F298FDE3FF25CDE13B23AD843B710EA09D42C38236815A4CBD510FA8F3C368073D898910D4CAE1894B23DE6D8BDC52C8D298F2FA2F3D1574442F839D2AC27517F423444CCC9C8F7EBC9CFF02D93E8F5B596E8E708B15C9757F5C4273E7348467CD4808C0B4ABF6998644873E2C306953F8524277ED3A472B882E50F835C958306BD17709D8D7FE7267CDDA0FEC53DF78A0CAFF71BA670EE3DC822F647070D13819056B41ABD3AD2A344C44371F024083CCB893D5FB97229D71159F8476A1BEDEE267928E797D539848EE343B040D0828B0F06BADB360A48EF110501F2ED4016F242354661E22DED111FF21AB594AF40CDB37FD166EAD2CDA9002ACE9D32E0BEAC23005ED0534C30C7C68925CA18531458C8D6133378882D8FC05904B3E83080C814EE8290E81CCAF5838B432DC747A44E6D85A9C38135522C13A17E39C53EC8020DEBD6E171B233118AB19A6C53E96362B7021E0E1C59087FBB8F46F09A97EC49A05CB22DA5FB96EA321122EC1B8ACF4262CBB746CD1135BF93419472840624875B035864DE3210E1C10DCCD169A9742AF1294A612E185D37885A632910D7576354AF689D00B3B948ABA27959EB7C57C053E6A206B36C882E46128B52631B3D15B64886FD2D21A5BF024CE254AD279E1E14B3D0CBEBD14351904E0BD7C38ACAF5788E7C1F6C5EA8642723C64294B1A72F17DD0BBDAEC0185A4149BD37D3369304B736B4C2CA57100D9A9E392CE0A788A35B141D93A7B6AB91E589A622EA52396A2ED1572A8DC79423FA779ACDD4AA7349164ED8CE60366E94C2E3EB68899BE8AC71070111C46AEAC5538F842E6DAA41D7A1A57B4211A96A9F889C46998FB6936806D3B65F79055AAD4F539E6AB346522AEFBE4EF5EC55D6552DDB6D6D926DA70850BA13D56194562E8B88A504EDF12BAB9445199544CFC6C3449AEDE759653B450B8F2A67DB4E9C56A1886A5611438C3C9B7510C7A09E59383A2AF5C8C0A56CBB89E8F6F6AF4210A5C2228218698F90D701E5DD231D6D8F2415FA8A60D287CE787119AF042E1E6F8F2655058B70D287AE99343D89EA29B4FC8C5A87A85705CB936635F2AEA3543E66961F9AD4FB46DD0149A5EDB2CB46A7E68AA350F9BD44B756AFF3D44DDDC12AAE27A480BD15AEAC1FF44E41B57AC1D9D876E2F2CF2C88AACE59C5B9E3F4D56B88EE42DA6D4425C91C38BB9528B78F717213687E5CA35D0D0449D402F01E1C3BBA169CFBABE017928FCC1175961063A29A6DBE1D1C0E5E2B4F739ECF33996110D8A4E55B991E8DB8ED3E6171287F9584775DEFAD631B45EEDA0A195A2169466DBC9E98BFC53CC7C6ECE71BC1B6675C3058F3636364FCDEBBDB52F758E3C9BB9FBB31B2F4664288D8DE6B0951FCCBF1B6F010A20F646972EBE8552518552EF6D867173D3C6B3B0F2376E361C59E7AF3EA757BE7F01F09C26E26D2F98B2F0AFA0588FC58A00F46C93B8025F1103FEA095468EFF7C3297927404317C368CD3B816E22CADE0DF4CAA1552F065A805505CCD6FAA0DB6879CA9D957E1DCEC736EF5A35CDEA4FFFAD9B760DE5C76AB90DD78FAD77EEFA76874543E5291BB73D1D734B4E5451F5DB69C7F7DFD1E5D57B3415A53FED857F4D23575CE626A61FBF40828516E9AFB2CB56DBEA6DECF45648ABEF4696F5832BDBC11512CADB7D65CDE2CA5E7195A54483F99974924B5BA5B59DD2B2F5D36B46CFA8435C5CFEBCE0DFA619DCCA38DBE901EBD515480785FFE004A92870563944543BA2D89212414633A34B2FCD478A4629897AD7C41CD990254E187796C8E2F0D9C24110BF4B4D5E797D746FB13DA31721F7430E53C6EE2D91AAD4515EAB931F37BA659DC7177EFCFF3EB6310550D38129E00BFA2174889DE97D567230AB80881266727788D692477788D526433AF7684BA0C47C599EBFC6AE4F002CB8A00BF480FBE8064EFB19AF90B5496B66D520CD0B219B7D7CEAA015436E9060E4FCF0137CD876D7EFFE166000F5EA2F8DE7370000', 'hex') , '6.1.1-30610')

