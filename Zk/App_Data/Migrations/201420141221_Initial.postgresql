/* * * * * * * * * * * * * * * * * * * * * * *
 *
 * Migration:		Initial
 *
 * Date and time:	12/21/2014 9:30:19 PM
 *
 * * * * * * * * * * * * * * * * * * * * * * */

CREATE SCHEMA IF NOT EXISTS "public";
CREATE TABLE "public"."Calendars" (
    "CalendarId" serial NOT NULL,
    "UserProfileId" integer NOT NULL,
    CONSTRAINT "PK_public.Calendars" PRIMARY KEY ("CalendarId")
);
CREATE INDEX "IX_public.Calendars_UserProfileId" ON "public"."Calendars"("UserProfileId");
CREATE TABLE "public"."FarmingActions" (
    "Id" serial NOT NULL,
    "Month" integer NOT NULL,
    "Action" integer NOT NULL,
    "CropCount" integer NOT NULL,
    "Calendar_CalendarId" integer,
    "Crop_Id" integer,
    CONSTRAINT "PK_public.FarmingActions" PRIMARY KEY ("Id")
);
CREATE INDEX "IX_public.FarmingActions_Calendar_CalendarId" ON "public"."FarmingActions"("Calendar_CalendarId");
CREATE INDEX "IX_public.FarmingActions_Crop_Id" ON "public"."FarmingActions"("Crop_Id");
CREATE TABLE "public"."Crops" (
    "Id" serial NOT NULL,
    "Name" text,
    "Race" text,
    "Category" text,
    "AreaPerCrop" float8,
    "AreaPerBag" float8,
    "PricePerBag" decimal,
    "SowingMonths" integer NOT NULL,
    "HarvestingMonths" integer NOT NULL,
    CONSTRAINT "PK_public.Crops" PRIMARY KEY ("Id")
);
CREATE TABLE "public"."UserProfiles" (
    "UserProfileId" serial NOT NULL,
    "UserName" text,
    "FullName" text,
    "Email" text,
    "IsApproved" boolean NOT NULL,
    CONSTRAINT "PK_public.UserProfiles" PRIMARY KEY ("UserProfileId")
);
ALTER TABLE "public"."Calendars" ADD CONSTRAINT "FK_public.Calendars_public.UserProfiles_UserProfileId" FOREIGN KEY ("UserProfileId") REFERENCES "public"."UserProfiles" ("UserProfileId") ON DELETE CASCADE;
ALTER TABLE "public"."FarmingActions" ADD CONSTRAINT "FK_public.FarmingActions_public.Calendars_Calendar_CalendarId" FOREIGN KEY ("Calendar_CalendarId") REFERENCES "public"."Calendars" ("CalendarId");
ALTER TABLE "public"."FarmingActions" ADD CONSTRAINT "FK_public.FarmingActions_public.Crops_Crop_Id" FOREIGN KEY ("Crop_Id") REFERENCES "public"."Crops" ("Id");
CREATE TABLE "public"."__MigrationHistory" (
    "MigrationId" varchar(150) NOT NULL,
    "ContextKey" varchar(300) NOT NULL,
    "Model" bytea NOT NULL,
    "ProductVersion" varchar(32) NOT NULL,
    CONSTRAINT "PK_public.__MigrationHistory" PRIMARY KEY ("MigrationId", "ContextKey")
);
insert into "public"."__MigrationHistory" ("MigrationId", "ContextKey", "Model", "ProductVersion")
 values ('201412212029227_Initial', 'Zk.Migrations.Configuration',  decode('1F8B0800000000000003EC5CDB6E24B7117D0F907F68F46320CF8CA45D43163436B4232919C7BA40B336827D5950DD9C51436CB2C3662B12827C991FFC49F98554DF79E90BBB67345682600163875D3C2C16AB5824EB78FFFDEB6F673FBC84C479C63C0E189DBB879399EB60EA313FA09BB99B88F53727EE0FDFFFF10F67977EF8E2FC52CA1DA772D093C673F75188E8743A8DBD471CA27812061E67315B8B89C7C229F2D9F46836FB6E7A7838C500E10296E39CDD27540421CE7EC0CF05A31E8E4482C835F331898B76F8B2CA509D1B14E238421E9EBB5F9E26B990EB9C930081022B4CD6AE832865020950EFF4E718AF046774B38AA00191CFAF1106B93522312ED43EADC56D67303B4A6730AD3B96505E120B160E043C3C2E4C32D5BB8F32AC5B990C8C7609C615AFE9AC33C3CDDD052298FA88BB8E3ED8E982F05450B2EBA4943E70BE3C1D546B3E9B647F0E9C454244C2F19CE24470440E9CBBE48104DE5FF1EB67F684E99C2684C8EA8042F04D6980A63BCE22CCC5EB3D5E6B4A2E7DD799AAFDA73A40D5BDA16F3E9D2515C747AE7303CAA00782ABD597A6BE128CE33F638A3912D8BF4342600E8BB7F471663F430B6D4CF0320E4DEB80E0FE6135A81BF41C6C322D34D02BC44308BD732FFD062E7E8F4926163F0651EEE91345E46BBDB4579C85F78CE82095C4D7CF886FB0004D59A7D88A25DC1BA0726A8746452BC45CA2D64FF9508D57AAA57E2D9596B5399BD61EDEE9F7CA0CED9C5FE9B2E70818E3F9FBF4F86B46C563395CB6C4454B9FBB6B38E57A4840A9D9D39F83B116F073C1209DEC2A02EB80DA65ECE94EDE13A2D6CAC24F1B4533B15625E16B9F82A9C856A198AB60957E40F2FF81A78C95FEB70A17C1615D5CE71ABDFC84E9463C425CA21758DDE005FB654BA1C1CF3480A31C74123CE98DA47BE4BDFD200B98FF86F1D7371FE89C63748779EE76F958170CBCC5B6E327B419D6EF8E071ED63A622F0811719D3B0E7F2B4ED827AEB3F250EA26477D902BF60F304EB6C7C63BD876FF82F8338EC57848EB60978E4676312F75D873E86BA7B8A1BBC0A043E06ECF9E7BD914AE600E7B19E832440179F35196F1791471F68CABB5FAC420DD213ADAF39350F2FB228896F115419BB854A92700A0CB363E0F06F03127AF6030D9FB54335CE3F001F3329B30B14AF3F82F8824F07366184D91FE11D104F1A0123FEC16BFC20F5C9137773945FE1A215EEBF2A15BF83CE2A99314C2273DC85852FADB9E4926B4163EEE51F9C784D4C2DFF6A99C6C60F993B856E5A847EF158E44F6BB36E1C71EF56F9F04933B7C3CEC99C20D848032C4E1ECA8672290CC34AD661F4ECC28C9E3A12346EA937E152645C075C649D96DBFA152A74C5BFFCF73769BF7375BE83C8E991764736EBAB8D6F70C75DC4BEA3B76970EF59E25DD88AFC16C41048682BD6DEEFEC9985AEF10D59B423D447D2B52D16793C9A16E0D69E6830C929EEA2C35552E37BB37847C31928D909D3B776800F531A54DB9969795FEC5E99A71F3838C04AA1CF754DC435555C0BDA5179860819DDC82297CEC21DF4CDD102ABEDA02A736CCD30312220BB8ED42A007549847BC807A41844897F65AA7E127C354BF6A24FDCB058E604850B46B5576A242359266BA3E4BB53A5E7ECC813E027A549BDA97A7B405BF88864D1A742CF6E9F2C0A3FB518A08070ECD912123D6672AC33B0D675441F4675203490BEF1EB8345A1BF5C9A2B8A773BA484D9D95A8D03024EBB74C4A7A5C9284BB9FA174F7B04E10D5944CCB1A3E679D12245069CDF520572D31DC4AD90AF55AC8C817B6196327969173846C95DCEBB6B688F6CE6E1AA3237758640F9B75B4C817124C1131D6132F6F5FD5B654D707A77981B02C244E5B2A8967D7288A6045A4CA62D1E2ACF2B2E2E29BD5F0C25B98634CBDB8A1FE56695B8D04777EB4C1DA57181A34BD0A782C2E90400F283D0A2FFCD010AB37E196FDA81C47DF67CD952A77AAB247FAF772A7D7AB800D89AAE87605B309D32C973D6634B889D935ABE822827847FD6EC14812D2BE9A60179A963665C09E8C9ABA90363B23E71AE6338E2DEA7A58AD96B6B98C5B3235E90D5FB79EFE6DE6D66D3C6CB18A371319A068B2C728D3BC0CD29CFABB50A45292E28375F3BB71973C758C0CEC86646813D48DDDDEC627F21747B97FDE628F9017336484BC65803754950A75432A5B0778A75C8A505C54FE30182F2B3434C065EDF6684ADD4286533ED8E3A9450B1950FD628F68D62D6454F3EBBB89D2FC9C332E4AE5DBC3F060EDECFD1669B30BD38CE6BAD51EA9AE44C84875AB3D52516A90618A267B0CB990A0EC7352FBFEFD503D41779C30A4DB65EF4142921D7460486F045DEC26E3C6689A6BD459F16BD7A1317B552A01472BDCFA84333A1776EA05E77E3FC8DE0297715AA6AA5ECC074E5FBF626DEB43556DBDC77F32B91DFB8E74A71EB90C19C4EE7D447A3D785FFED13CDD7E9F306EDFBA48B5AB55B770EDB67D56DC7CFBC9BDC6553817491914EC39F0D36BF04DB489FF4EEA966B4483351C00F23A8FFBDDE478F251A306BF1F9AEE348E7DD2F056D0C4D55597E977A0D006547C28E2B68BA9309085D2C898C88732DE9697D4C72F73F79F59D75367F9B7AF4AEF03E79683079C3A33E75FBBA2AE746C4BFBE092BD8DCD15E2663EC45694CD51100653731C4A539A1BE8440D186DAE64C5692B77D6A16AE4FDEC871E46B6FC1FF15D997D9497A086AD8E4C6B1CD35F672C8EC1682023AE0943E2642490C4311C87D34056A44988A1B583AC386C8826F2E2A8886FA32D5A808D222C8E889BB72011BE5DF6DD36A2744EE0180C85EE3706C064F23D304646FAC3D6041CF53A3D9808D35E3CDC86B3B2155DC28A9FD07DD3B6E647F4D52DDA07EEB9EBEF9C1EB1153149DEFE079084DE937334970E6C0E126FED10ED97F93D38811D394B2184FC0EF4A991DBD58E7CA7FB417B1FF4ABFF2ACA95490A68293918FFDB5A07AB2A7F4D99BB51468E85D5CF33653B3DA79377D54FBB6A19AF9B49D3C8CE6A2567B54DA9915BD344DDAA22AF9BC0D5328E24630EB76F9697EE032A19C39AB0D4CE7A7A9FF42DD93FEA52F5FB98EECEB8590DAE6A54FA6C485956BEB11B2E96F9EA0BBBA4F40F3FC0461D079B1A227DC7A6D853F6C74A6649D7ACDCAD358D4A11FDD10B0BE4C3E679CE45B0469E80CF1E8E63999D7F193E607F496F13112502A68CC307A294F6D3EDBE6BFC8C70A6EA7C761B65DBDA2EA6006A0630057C4B3F2501F12BBDAF1AAE362D10691E29EE8FE95A8AF41EB979AD906E18B5042ACC57A5BFCF388C0880C5B774859EF118DDC0777FC21BE4BD966FF9ED20FD0BA19AFDEC22401B8EC2B8C0A8FBC34FF0613F7CF9FE3F020C000E8FEE86FF440000', 'hex') , '6.1.1-30610');

