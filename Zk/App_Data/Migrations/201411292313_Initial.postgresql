/* * * * * * * * * * * * * * * * * * * * * * *
 *
 * Migration:		Initial
 *
 * Date and time:	11/30/2014 12:14:01 AM
 *
 * * * * * * * * * * * * * * * * * * * * * * */

CREATE SCHEMA IF NOT EXISTS "public";
CREATE TABLE "public"."Calendars" (
    "CalendarId" serial NOT NULL,
    "UserId" integer NOT NULL,
    CONSTRAINT "PK_public.Calendars" PRIMARY KEY ("CalendarId")
);
CREATE INDEX "IX_public.Calendars_UserId" ON "public"."Calendars"("UserId");
CREATE TABLE "public"."FarmingActions" (
    "Id" serial NOT NULL,
    "Month" integer NOT NULL,
    "Action" integer NOT NULL,
    "CropCount" integer NOT NULL,
    "Calendar_CalendarId" integer,
    "Crop_Id" integer,
    CONSTRAINT "PK_public.FarmingActions" PRIMARY KEY ("Id")
);
CREATE INDEX "IX_public.FarmingActions_Calendar_CalendarId" ON "public"."FarmingActions"("Calendar_CalendarId");
CREATE INDEX "IX_public.FarmingActions_Crop_Id" ON "public"."FarmingActions"("Crop_Id");
CREATE TABLE "public"."Crops" (
    "Id" serial NOT NULL,
    "Name" text,
    "Race" text,
    "Category" text,
    "AreaPerCrop" float8,
    "AreaPerBag" float8,
    "PricePerBag" decimal,
    "SowingMonths" integer NOT NULL,
    "HarvestingMonths" integer NOT NULL,
    CONSTRAINT "PK_public.Crops" PRIMARY KEY ("Id")
);
CREATE TABLE "public"."Users" (
    "UserId" serial NOT NULL,
    "Name" text,
    CONSTRAINT "PK_public.Users" PRIMARY KEY ("UserId")
);
ALTER TABLE "public"."Calendars" ADD CONSTRAINT "FK_public.Calendars_public.Users_UserId" FOREIGN KEY ("UserId") REFERENCES "public"."Users" ("UserId") ON DELETE CASCADE;
ALTER TABLE "public"."FarmingActions" ADD CONSTRAINT "FK_public.FarmingActions_public.Calendars_Calendar_CalendarId" FOREIGN KEY ("Calendar_CalendarId") REFERENCES "public"."Calendars" ("CalendarId");
ALTER TABLE "public"."FarmingActions" ADD CONSTRAINT "FK_public.FarmingActions_public.Crops_Crop_Id" FOREIGN KEY ("Crop_Id") REFERENCES "public"."Crops" ("Id");
CREATE TABLE "public"."__MigrationHistory" (
    "MigrationId" varchar(150) NOT NULL,
    "ContextKey" varchar(300) NOT NULL,
    "Model" bytea NOT NULL,
    "ProductVersion" varchar(32) NOT NULL,
    CONSTRAINT "PK_public.__MigrationHistory" PRIMARY KEY ("MigrationId", "ContextKey")
);
insert into "public"."__MigrationHistory" ("MigrationId", "ContextKey", "Model", "ProductVersion")
 values ('201411292313095_Initial', 'Zk.Migrations.Configuration',  decode('1F8B0800000000000003EC5BDB6EE4B8117D0F907F10F41878FB62CF2CBC867B17DEF638E9CDFA02F7EC229897012DB1DB82294AA128AF8D205F96877C527E2145511792BA51EAB6D309820106D354D561B12E2C9255F3AF7FFCF3FC87979038CF9825414417EE7C32731D4CBDC80FE876E1A67CF3CDA9FBC3F7BFFFDDF9273F7C717E2DE84E041D70D264E13E721E9F4DA789F78843944CC2C06351126DF8C48BC229F2A3E9F16CF6DD743E9F62807001CB71CEEF53CA8310673FE0E732A21E8E798AC875E46392E4E3F0659DA13A3728C4498C3CBC70BF3C4D2491EB5C900081006B4C36AE83288D38E220DED92F095E7316D1ED3A8601443EBFC618E83688243817FBAC22B75DC1EC58AC605A3116505E9AF0281C08383FC9553235D94729D62D55064AFB04CAE5AF62D599E216EE12114C7DC45CC79CEC6C49982054F43A29A88F9C2F4F47A5CD6793ECCF91B34C094F195E509C7286C89173973E90C0FB337EFD1C3D61BAA02921AA3820107CD30660E88E453166FCF51E6F0C2157BEEB4C75FEA90950B237F0CAE5AC283F39769D1B10063D105C5A5F59FA9A470CFF1153CC10C7FE1DE21C3330DECAC799FE6A521873829759CC6760DCA0E7609B4D6FA05D211642CC5D78E21BF8F63D261959F218C4D2C5271AC9D7CAA6572C0AEF23628294145F3F23B6C51C248D3AC9D651CABC01220B05340A5A224A8A4A3EED43395F2196FEB5105A95E67C5AB976A7C36B2BB4F37A8DE59D5D7F8CCBBFA7AB5F47943F16D36526CE47FADCDDC029ECA10009B58B9F83B196F07319411ED957045601B5CFD8339DBC2744AD85859F36826664AD42C2D73E0105C94EA12845B0CA3B40F9FFC0D3E6127F97E1C219D8C575AED1CBCF986EF923C4257A01EB062FD82F4672097EA1019CE18089B3B43792EE91F7F6932C61FDDB88BDBEF944170CA33BCCA4DBC9B92E23F0165BC61FD17618DF1D0B3C6C30622F0811719D3B06FFCA8FD6A7AEB3F6907093E33EC875F41B2827DB63933D6CBB7F42EC19277C3CA475B0CB84DF19EC82E49DA3BC38A90D8D74BB13DE41477BBBE5D250B15BEE04ABE48AA06D5200F56CDAC0B28B21416C1F33F20ACB5415AC6BE81A870F9815FA89F85AE4A15F1149E1E7ACA64F8DFA274453C482927CDE4D7E851F98465F8F528DFE1A2156C9F2A19BF822660129894F7B90B122F4B73D8B4C69457CD223F24F29A988BFED1339DD82F9D3A412E5B847EE355CE1B3DF950A3FF6887FFBC42395E1E3BC670937D1B33EC57C76DCB310D88C0DA9661F4EEB5122E3A12346AA936A192679FC75C649C1F6BEA1526DF9B6FE2F734E9BF7376BE82249222FC8D6DC74F1AACEC9FABC9FA8EFD81D9AF57B8272A3BB06B50531280AF6B685FB87DAD27AA728EFC4D514D5A95E479F4D2673531BCACA0729449C4A2C25D50EE7FB57847AB05795909D9BF6A800FD31A04DB89697817EE374ADB8F941410195C7151D70AECB0880B7F41213CCB123552770130FF9F56317C488AF8FC019043391FC1159C2350D223CA0BC7E6009A817C48874896D300D38E708C1CA29CC2F973886B940C22E3BEC36773985A1AC3EDDB4FA983CD1000F078E72FFFAF22446F00B6FD88F41B87C4B2ECE36A6CB0844385B183E0BC9AF3A3ED51CB1E6773A88F9A257433222B9074E0466A33C59C0F6300BEB3431CB00309815B5B7AC4679005188BB9F4A4CBFB04E02E55AEA2AAD399BF5B6AF802AC636E359D7C4702D65A6E9D5502D27D86685BD6846CD03AA56A4BBEDAC11E32DB8AE8C8EFC6091216CEC68911314983C54AC175EDCB0CAFDA82A5E4D65F5AAA8724D5BCA5CE7D7288EC1224AD92B1F71D6B2E6B5FC663DBC2A144A8CA9973414874A69CB99E0EA8AB6D8F80A5383A457014BF825E2E80189E3EED20F6B64D5EEDBB21115F3981B6CDD52C5165570887F175BBC59A26A484D39DB15AC2614792DBB9337B8499D352B37228258477169199134A47D05AB2EB42251AA486DC953388DB19E5A7AAD29AC7626D12D60651F633B1967243DBF0DB7540F7F9B824DE50E334FFE12A202E443F618454657419AB37C178A52E0D0BCAE1A3E187791C962642837A43F9B306E647B1B9F90EF722ABF1CB147904FEC2A821C19E00DE5FBB9BE0515A303BC537D20D75C54FD30182F7BFE6E80CBC6EDD1B4D774154EFB608FA73FA5AB80FA177BC4FA6BBA8A5AFF7A30512A4F36E3A2B4E9706611A5CD6CFB498DBB47EB5BDB413F33766458E53ED59B4815DA4109539C81BB7A4E6A77A4BABA469D8EBE761D93B227930270B4C0ADCF14A37341A75C70D2F583EC856B95886A50F90E3C70F9E6A562571F2A2B9E3DFE93D1EDD977945BE448336410FBF711E5BE7C58FED1BCDC7E9FA8DD374D9272572BEF9DC6FDF23CBFEBF5F75AD62E7F9244D4B5A3E7C01717BF9B789BFC955423D788061B4880B27AE17E3739997C343A350FA76B729A243E69B81D37B54EEA66FA0F743406947FC8E3B6ABC43CB03740AF71CB396AEFA72BEAE39785FBB78CE7CC59FDE5AB643B726E19D8FCCC99397FDF570B41C746F41E3D3D6FA365AD814E4EB153EBDC28885AC7DC3894A6C436D07B1A30DA5CC9AAB7A8D84B878A21F9ECA71ED6F4F63FE2BB6A578AACAF0CB38EDA5E3686DFEC1C1B83D1D014B62111E2A72381945EAF71380D4D63340D318C76348D0D9BA2A9896C54C4B7B58F59800D6B1C1B1130FB69ED3A84C06953D5CE3D16FADD7270AF437BED6897B6849D0AE35605E9EE6BA77541BCEF11BB7DE29E8BEFDECBE23BF59EA83BE3803E9043728EE677649B1CFBD60ED17EB37D0727B0EBBF91D5D9F76C8D19B941EDC95B5ADE33DFB4A7E6BFA38FA65EF06D795CAEFDB7998E5619F96EB070E3ACB9110C2DB3607BEB4567334D7F2F4DCB7CDD5D128D2D37AD1D376D4B6AEC9B68EAC7696DC769416E6E4C78EF661DD3DC7A4DDDBAEFA4BD79E530BB705457A8EA8F87B1DCBDB5D8A85E59956F6CBA69ACBC613F4D34F5C74BD80295FF4E0EDB6F126C2B08F11C4BB1A76D7E25CD8A6EA2620F36242A48CC971CCC910F3BE305E3C106791C3E7B3849D4D6E94FE103F657F436E571CA61C9387C205A8556ECE55DF3679D42BACCE7B771B667ED63092066004BC0B7F4C734207E29F755C3FDAD05422489FCA6246CC9C58D69FB5A22DD44D41228575F99DB3EE330260096DCD2357AC6636403A7FD196F91F75A3C49B783F41B4257FBF96580B60C85498E51F1C34FF0613F7CF9FEDF020C00FFA069A055410000', 'hex') , '6.1.1-30610');

