/* * * * * * * * * * * * * * * * * * * * * * *
 *
 * Migration:		Initial
 *
 * Date and time:	5/25/2015 3:15:53 PM
 *
 * * * * * * * * * * * * * * * * * * * * * * */

CREATE SCHEMA IF NOT EXISTS "public";
CREATE TABLE "public"."Calendars" (
    "Id" serial NOT NULL,
    "Name" text,
    "User_Id" integer NOT NULL,
    CONSTRAINT "PK_public.Calendars" PRIMARY KEY ("Id")
);
CREATE INDEX "IX_public.Calendars_User_Id" ON "public"."Calendars"("User_Id");
CREATE TABLE "public"."FarmingActions" (
    "Id" serial NOT NULL,
    "Month" integer NOT NULL,
    "Action" integer NOT NULL,
    "CropCount" integer NOT NULL,
    "Calendar_Id" integer NOT NULL,
    "Crop_Id" integer,
    CONSTRAINT "PK_public.FarmingActions" PRIMARY KEY ("Id")
);
CREATE INDEX "IX_public.FarmingActions_Calendar_Id" ON "public"."FarmingActions"("Calendar_Id");
CREATE INDEX "IX_public.FarmingActions_Crop_Id" ON "public"."FarmingActions"("Crop_Id");
CREATE TABLE "public"."Crops" (
    "Id" serial NOT NULL,
    "Name" text,
    "Race" text,
    "Category" text,
    "GrowingTime" integer NOT NULL,
    "AreaPerCrop" float8,
    "AreaPerBag" float8,
    "PricePerBag" decimal,
    "SowingMonths" integer NOT NULL,
    "HarvestingMonths" integer NOT NULL,
    CONSTRAINT "PK_public.Crops" PRIMARY KEY ("Id")
);
CREATE TABLE "public"."Users" (
    "Id" serial NOT NULL,
    "Name" text,
    "FullName" text,
    "Email" text,
    "AuthenticationStatus" integer NOT NULL,
    "CreationDate" timestamp NOT NULL,
    CONSTRAINT "PK_public.Users" PRIMARY KEY ("Id")
);
CREATE TABLE "public"."PasswordResetTokens" (
    "Id" serial NOT NULL,
    "Email" text,
    "Token" text,
    "TimeStamp" timestamp NOT NULL,
    CONSTRAINT "PK_public.PasswordResetTokens" PRIMARY KEY ("Id")
);
ALTER TABLE "public"."Calendars" ADD CONSTRAINT "FK_public.Calendars_public.Users_User_Id" 
    FOREIGN KEY ("User_Id") REFERENCES "public"."Users" ("Id") ON DELETE CASCADE;
ALTER TABLE "public"."FarmingActions" ADD CONSTRAINT "FK_public.FarmingActions_public.Calendars_Calendar_Id" 
    FOREIGN KEY ("Calendar_Id") REFERENCES "public"."Calendars" ("Id") ON DELETE CASCADE;
ALTER TABLE "public"."FarmingActions" ADD CONSTRAINT "FK_public.FarmingActions_public.Crops_Crop_Id" 
    FOREIGN KEY ("Crop_Id") REFERENCES "public"."Crops" ("Id");
CREATE TABLE "public"."__MigrationHistory" (
    "MigrationId" varchar(150) NOT NULL,
    "ContextKey" varchar(300) NOT NULL,
    "Model" bytea NOT NULL,
    "ProductVersion" varchar(32) NOT NULL,
    CONSTRAINT "PK_public.__MigrationHistory" PRIMARY KEY ("MigrationId", "ContextKey")
);
insert into "public"."__MigrationHistory" ("MigrationId", "ContextKey", "Model", "ProductVersion")
 values ('201505251315210_Initial', 'Oogstplanner.Migrations.Configuration',  decode('1F8B0800000000000003EC5C5B6FECB6117E2FD0FF20E8B17076D79773EA18DE04CEDA4E9DC617789DA06F07B4C45D0B952895A21C1B457F591FFA93FA173AD49537499476EDB329FC62AC78F9381CCE0C87C3A1FFFBEFFF9C7EFF1285CE33A6691093B9BB3F99B90E265EEC07643D7733B6FAE6D8FDFEBB3FFEE1F4C28F5E9C5FAB7687BC1DF424E9DC7D622C39994E53EF0947289D448147E3345EB189174753E4C7D383D9ECDBE9FEFE1403840B588E737A9F11164438FF80CF454C3C9CB00C85D7B18FC3B42C879A658EEADCA008A709F2F0DCBD8DD7294B424408A69373C490EB9C8501024296385CB90E54C40C3120F3E497142F198DC97A9940010A1F5E130CED56284C7149FE49D3DC7626B3033E9369D3B182F2B294C5D140C0FDC3923553B5FB2806BB35EB807917C064F6CA679D3370EE2E5088898FA8EBA8839D2C42CA1B2AFC2D966352F5DB730CB57BB55880F44C3E7D3E389C1CFCF9E8E8D39EB3C84296513C27386314857BCE5DF61806DE5FF1EB43FC774CE6240B4391602019EAA40228BAA37182297BBDC7AB721A57BEEB4CE57E53B563DD4DE8534CF08AB0C303D7B981C1D163886B791098B16431C53F62982362D8BF438C614A3806CE39AA8DAE8CC5FF56A38100822AB9CE357AF91993357B9ABBF0D3752E8317EC57252505BF9000340F3A319A616D901BF41CAC73FA94E12E118D608C338FD7A5AE738FC3BC59FA142485564CA4265F1A31B8A471741F872A48DDE2CB03A26BCC60327167B3659C516F00C9A099D448688D58B468E8932AEAF12AB2E4DA8A68919AD369A30D9D3A22CD70A8A2489D3FB4C54A5BAE63C29E6A75E1425096686376E3542B26001545BC6030DA023E17316C537D8CB015F946E9B6A99FAA22F4A8B135B1F0694368DEAC9548A8ED239037D9485D0B12066E67D0E74339BFE256A60C728FBCB71F6401F35FC7F4F5CD07FA91C6BF01F243D070CED276A8068D6274876921E105D0790C6267DBF107B41ED6EF8E061E563A622F8850E83A77147E95878463D7597A88CFE3A00F7299F32237E8E9166CFC5F107DC6291B0F696D570AFF63985DE17D3EECCAEED8954BA0FF5D06BA885010BEF92867197BE2DCF5F21558C24264B202080DB05FD50FF67B700E0F27EB9A6FFC7761CE36F67ECCC7134BAF5F3D8C98CF04A3D4FD0EA5E96F31F5EF718A59AE7A43955F47F8300556A6E07D94A75CD3B71E05B404142F4A06AA4EBB9C669120A5E50E77955E86689D56240D93D31CE32D441338E5631ABE72DF47101D995FD7387AC4B4DA0462B6E4FAFC2B0A33F89C69DC955AFF844886B8FF5636DFEF6E7E891FA9D45EF755A4F6D7887A4F75E3A3EEC66709E5325B363EEE431688FEDC33C98CE0BAF1610FC93F656183FCB98FE46C0D72D21072D043F512272CFF6E18F8A987F85B8FC562874FFB3D13B8899FE521F667073DD3008754A16A7674AC2B53A1361DAA2486066A7D2A357398423548BBA15585CB6DAB558D47DDA65876EC34B91E1BF25587DC0D069F9198BC46319FA11D8FA5990C63F3599AC65E9073CB149F6C4245F2F017C477ECE2468DF7A8043EAF81794102EC826D69EEFE499B61EF10B5B7D60CD104B664F47D997C40BF25E738C40C3B052AF7F5520FF9FA060C5CF3252E0A1C1BC4487ECAB69CA114D7DA3E03C59898C8BC3C0E20A3CE26134D8CAC19207BDD6DC4B504DEFB17B56BC62D7E7D035A1C04DE5D4A0A2F6C012E120A48B3AF094687D7E117663066407269CF2ACF4C9D3DC70687473F1235CE9FC6538D8532887AF7A3212942D903C765CC484F2E7B3D9DF99A993A176BD9D3593F3E99A04CC734055858D9163609F175A17177245E953C6B035BCF535FABE960D04A510450418A54999739319C4BF99AF77248B39BB696732B9C116DA5C895428E37E6881298D099D161432DACA8CD3A5AD84D01A6D441EB895707CFDAE435A917D322F7A2CAD198B624699C5EA3248115119236CA126759646C2CBE590ECF65880A8CA9971A521A6A6AEB91584CD11A2BB53034507A19D094F1449147C49DD0851F69CD4C06BEC55C5523AA365C5FB3CA74553DF86F7D3FC95358266D76A661E625CC2F0227329F2A36088EDE354F9F4121A286E0CE220EB388B40588BA7A170155B17F51A2239C4E15DA551E4D352669BBB6CC75AB35518CC9660B236F9FC357A7A7FFDB2C5119261201CA227B8CCA611041CC4E44178A708B2E0209C53B2336C596B1A11A1B36431B153676FBDAEADB8650DCD68A0845C900A9A8AF6225A1A84BED91A4BB56114CAA1820F5E295AB24FA62C560BCFC42D5009797DBA349F7B3229C54618F275FCE8A80728D3DA27E3F2BA2EAB53BA3FD85DFB499F69B5C400BED3777DB55ED6FEE544594A6D41EA9BCF71161CAA201FA65BC129534CDD862C80E26DE87CA9B9858B333926C3A486F26D78643F77029B701791B99DF869C95A10611C3187DE8C468EE06259CA6F8FD65483E1776F8D142CCC4DA5D16FA0C728BF979B72BC5598B87E86CB312A31AC6244F79C8B002184D6079D01F49E030BAD453FEA60B5EA79D592E76DE7ECB0B2D8477C62E3287D8FE020B81AC77595C277F24E30779F8FE2AE5C904F5B59AC57437960D25106613CB289BDAC62B0C3C3746BB46B23B87D8821C1803793BA2DF5A304F6D526F2775504F09DE9D9681B4FE67585A64AD68C21345E3E7C0E751B59B649DFE236C4AAE110956E0FF1797AFEEB793C3C967E5F1D6EE3CA49AA6A91F1A428FA6D754F232BD43525640D851A9595D79570353FF0A07BE18A1B8E36A006C929F6A151389D4AEC9AE888F5FE6EE3FF34E27CED5DFBE94FDF69C5B0A5272E2CC9C7F6D2B8BB763FBF9FDAE93F460A61862A3A732A320B4F731E35044176CA0D8087D07888E7926A3C62FFAB58DAD6BCCB0372DFF27C2BAA95111DF868CE9AF3EFB18836178D1314EEDF4071DAB3046EC782841FA038F713886071F248B3094763CF8183684E901C828E6B53DFDB0001BF6E8E343F19490DE780C29B57B0C40D7938791DB96FEBC81FF2782B488C06C478CFA625DBF5FA1DA7841A534FC51006A86FDA6ABB77186A51C197BB74C47A7352B6693A444103F4CB970A0104E9129A3708ED4828EB06D102F4850A872403F07DB88359F5B0DA9D69CE304B07944D934539B017BC27CF5000AB7FB38F13699A6A26F3020EB739784C17C07BE0B82D01E0A7C0721B0CBB66DC26BEF92083BDE906D495A5AEE4CB72E2D834C5447AC70EB8262CE38D6F3D6D44533E71277A6121711BAB99BE4AF2060958BBDB23D83B433D9B83FD7B865BCEE644F634A726B4672DB948CE99FA67CE5D674E51664737E657F32B3652E73CBA8C6E4E8AF9CF7AC8A9C1CDCB74EE16DCF03DECD8466511C9BE4ADDD98EED6B29545CD6872546C1293ADA4613BF9C8FA55059861E1FFCAC11E9006EB06825FA011EC4906B86E73455671B5112814554DD4282C66C807EB7C4659B0421E836A0FA7A9F890EE227AC4FE15B9CD58923198328E1E4329BD8DEF275DE3E749D732CDA7B7496E37B7310520338029E05BF2431684CDCBB44BC3E9A905826F54E5F9323FA0F373E6BA79947A13134BA0927DF5FEFA80A32404B0F4962CD1331E431B08EDCF788DBCD7EA02AA1DA47F2164B69F9E07684D519496184D7FF80419F6A397EFFE27C000BB5779085E510000', 'hex') , '6.1.1-30610');
